{
  "active": false,
  "connections": {
    "When clicking ‘Test workflow’": {
      "main": [
        [
          {
            "node": "Google Docs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Docs": {
      "main": [
        [
          {
            "node": "Supabase Vector Store",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings Ollama1": {
      "ai_embedding": [
        [
          {
            "node": "Supabase Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "Supabase Vector Store",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Token Splitter": {
      "ai_textSplitter": [
        [
          {
            "node": "Default Data Loader",
            "type": "ai_textSplitter",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "RAG AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "RAG AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RAG AI Agent": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ollama Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "RAG AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "get 384 embeds": {
      "ai_tool": [
        [
          {
            "node": "RAG AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-05-21T09:54:43.714Z",
  "id": "tBxQTeq7RXMBJirK",
  "isArchived": false,
  "meta": null,
  "name": "Resources_384_vectors",
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -580,
        380
      ],
      "id": "deacdcb4-970b-4773-b3ee-11b454607134",
      "name": "When clicking ‘Test workflow’"
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "operation": "get",
        "documentURL": "1s7McwTQLvb-1dsmehGD6-bYbTpr19WL9xUDjoYMMX30"
      },
      "type": "n8n-nodes-base.googleDocs",
      "typeVersion": 2,
      "position": [
        -420,
        380
      ],
      "id": "4d08451a-2ea0-493c-bd56-db15229095de",
      "name": "Google Docs",
      "credentials": {
        "googleApi": {
          "id": "ENHwRft8kYjJGkH6",
          "name": "Google Drive account 2"
        }
      }
    },
    {
      "parameters": {
        "model": "chroma/all-minilm-l6-v2-f32:latest"
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOllama",
      "typeVersion": 1,
      "position": [
        -400,
        600
      ],
      "id": "d87f997b-7e26-4ea2-a30c-d6c802ac80d2",
      "name": "Embeddings Ollama1",
      "credentials": {
        "ollamaApi": {
          "id": "fv9DllLzKNe1SabK",
          "name": "Ollama account"
        }
      }
    },
    {
      "parameters": {
        "jsonMode": "expressionData",
        "jsonData": "={{ $('Google Docs').item.json.content }}",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1,
      "position": [
        -160,
        560
      ],
      "id": "43e8e7b5-21bc-4992-95ad-76ef5ead99b3",
      "name": "Default Data Loader"
    },
    {
      "parameters": {
        "chunkSize": 128
      },
      "type": "@n8n/n8n-nodes-langchain.textSplitterTokenSplitter",
      "typeVersion": 1,
      "position": [
        -260,
        700
      ],
      "id": "e8c96bed-be61-47b5-812d-af9b7efe7293",
      "name": "Token Splitter"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.1,
      "position": [
        -600,
        -160
      ],
      "id": "7687b452-402c-428b-9ddf-fd4c92dca926",
      "name": "When chat message received",
      "webhookId": "241eabd3-30ec-40fa-bb3a-268cbe308a7c"
    },
    {
      "parameters": {
        "content": "## Insert embedings",
        "height": 545,
        "width": 796,
        "color": 5
      },
      "id": "e2d7ed78-024a-4fcf-9ac6-8657caf8013e",
      "name": "INSERT",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -640,
        300
      ]
    },
    {
      "parameters": {
        "tableName": "langchain_chat_histories"
      },
      "id": "9be1eabc-6e38-41dc-aa2f-520bfe31a85d",
      "name": "Postgres Chat Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1,
      "position": [
        -200,
        60
      ],
      "notesInFlow": false,
      "credentials": {
        "postgres": {
          "id": "wK2pSCG9jTniRU28",
          "name": "Postgres account 2"
        }
      }
    },
    {
      "parameters": {
        "content": "## RAG AI Agent - 384 embeddings",
        "height": 464.8027193303974,
        "width": 1035.6381264595484
      },
      "id": "1df0358e-88c5-41f6-b7b8-8995b6927be0",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -640,
        -240
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "2a116d80-7e06-4385-8cdf-7898d1b82462",
      "name": "Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        220,
        -160
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "9a9a245e-f1a1-4282-bb02-a81ffe629f0f",
              "name": "chatInput",
              "value": "={{ $json?.chatInput || $json.body.chatInput }}",
              "type": "string"
            },
            {
              "id": "b80831d8-c653-4203-8706-adedfdb98f77",
              "name": "sessionId",
              "value": "={{ $json?.sessionId || $json.body.sessionId}}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "85b19cbe-922d-4847-bad9-fa426a89f2ec",
      "name": "Edit Fields",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -340,
        -160
      ]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "d7a8892b-8d2b-4cac-b8b8-8c56bffc4f54",
        "responseMode": "responseNode",
        "options": {
          "allowedOrigins": "*.greenplace.uk"
        }
      },
      "id": "dfa575d9-abad-4b53-9011-cf93f2c2a59e",
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -600,
        40
      ],
      "webhookId": "d7a8892b-8d2b-4cac-b8b8-8c56bffc4f54"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.chatInput }}",
        "options": {
          "systemMessage": "You are a personal assistant who helps answer questions from a corpus of documents. The documents are text based\n\nYou are given tool AAABBBCCC to perform RAG look up for available sources in your knowledge base and that is the only source of truth.\n\nAlways tell the user if you didn't find the answer. Don't make something up just to please them.\n\nYour tone should be helpful and friendly."
        }
      },
      "id": "3aa576e2-db09-44d9-a035-1aeffa7b8cbb",
      "name": "RAG AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.6,
      "position": [
        -120,
        -160
      ]
    },
    {
      "parameters": {
        "model": "llama3.2:latest",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOllama",
      "typeVersion": 1,
      "position": [
        -340,
        60
      ],
      "id": "af26662d-37ca-4e37-9f26-9f9a71ac114c",
      "name": "Ollama Chat Model",
      "credentials": {
        "ollamaApi": {
          "id": "fv9DllLzKNe1SabK",
          "name": "Ollama account"
        }
      }
    },
    {
      "parameters": {
        "name": "AAABBBCCC",
        "description": "tool to get our knowladge base documents",
        "workflowId": {
          "__rl": true,
          "value": "JP0ytaw6djQB1UM9",
          "mode": "list",
          "cachedResultName": "Agent_old_384"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2,
      "position": [
        40,
        60
      ],
      "id": "1d61c9e6-a017-4cd0-911c-2711cc8d35af",
      "name": "get 384 embeds"
    },
    {
      "parameters": {
        "mode": "insert",
        "tableName": {
          "__rl": true,
          "value": "ganttic_documents_384",
          "mode": "list",
          "cachedResultName": "ganttic_documents_384"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1.1,
      "position": [
        -220,
        380
      ],
      "id": "c7712c9f-940f-4e37-9bef-118b835d3d1d",
      "name": "Supabase Vector Store",
      "credentials": {
        "supabaseApi": {
          "id": "Vbtfas1bVCzZ2Wde",
          "name": "Supabase account 2"
        }
      }
    }
  ],
  "pinData": {},
  "repo_name": "n8n-backup-zm",
  "repo_owner": "zlatkomq",
  "repo_path": "",
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-05-21T12:00:02.252Z",
  "versionId": "c10729f6-eb30-4cc6-8190-80eac59f82ca"
}